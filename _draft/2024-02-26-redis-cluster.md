---
title: "Redis Cluster"
last_modified_at: 2024-02-26T00:00:00-00:00
categories:
- redis
tags:
- redis
- cluster
toc: true
toc_sticky: true
---

빅데이터 플랫폼 중에 하나인 *Redis*는 초당 5~10만건 이상의 데이터를 빠르게 쓰고 읽을 수 있도록 *Scale-Out* 기능인 *Partitioning*을 제공하는 데이터 분산 처리 시스템 입니다.
기존의 관계형 *DBMS*에서도 데이터 분산처리를 위해 *Striping*과 *Partitioning* 기법을 제공하지만 이는 하나의 논리적 데이터 구조인 테이블을 여러개의 물리적 디스크 장치에 분산 저장하는 개념이었습니다.
이와 같이 하나의 서버 내에서 시스템 자원을 최대한 확장하여 데이터를 저장관리하는 기술을 *Scale-Up*이라고 합니다.
이와는 달리 *ScaleOut*은 하나의 논리적 테이블을 수대~수십 대의 서버로 분산 저장하는 개념이며 데이터를 분리 저장하는 목적은 동일하지만 분산 방법은 완전히 다르다고 할 수 있습니다.

이렇게 데이터를 분산 저장하는 목적은 무엇일까요?

1. 자원 공유

   하나의 서버에서 사용할 수 있는 시스템 자원(CPU, Memory, Disk)은 매우 제한적인데 초당 5만~10만 건 이상의 데이터가 일시적으로 발생하게 되면 순간적인 과부하가 발생하게 됩니다.
   이 경우 하나의 서버 자원으로는 이를 한번에 처리할 수 없지만 다른 서버의 자원을 함께 활용할 수 있다면 동시에 빠른 처리가 가능할 것입니다.


2. 성능 향상

   하나의 서버에 지속적인 쓰기 작업을 수행할 때 해당 서버가 이를 처리할 수 있는 용량에는 한계가 있을 것입니다. 이와같은 경우은 연속적으로 발생하는 데이터들을 처리되지 못하게 되면 일시적인 대기 상태에 놓일 수밖에 없고 이는 시스템 전체의 성능을 지연시키게 될 것입니다.
   이와같은 경우는 연속적으로 발생하는 데이터들을 처리되지 못하게 되면 일시적인 대기 상태에 놓일 수밖에 없고 이는 시스템 전체의 성능을 지연시키게 될 것입니다.
   이때 다른 서버에 연속적으로 데이터를 저장할 수 있도록 해준다면 이 문제를 피할 수 있을 것입니다. 이를 *Load Balancing*이라고 합니다.
 
 
3. 안정성

   데이터를 여러 대의 서버에 분산 저장하는 방법을 통해 빅데이터의 빠른 쓰기와 읽기가 가능하지만 만약 특정 서버에 예기치 못한 장애가 발생하게 된다면 데이터 처리 도중에 데이터가 유실될 수도 있을 것 입니다.
   이와 같은 현상이 발생하더라도 안전하게 데이터를 복구할 수 있어야 하는데 이를 위한 솔루션이 복제 시스템입니다. 복제 서버는 분산 서버에 장애가 발생하는 경우 실시간으로 데이터를 복제해 두었다가 장애가 발생한 서버를 대체하여 작동되는 서버입니다.

Redis 서버는 *Master-Slave*, *Master-Slave-Sentinel*, *Partition-Cluster* 기능을 통해 데이터를 복제하고 분산 처리할 수 있습니다.

## Partition 유형

### 1. Range Partition

Redis 서버에 저장되는 Key 값을 기준으로 특정 범위의 데이터들을 특정 파티션 서버로 분산 저장해주는 개념입니다.
예를 들어, Key Value 202402240001~202402240100은 첫번째 샤드 서버1에, 202402240101~202402240200은 두번째 샤드 서버에 맵핑 시켜 저장하는 방식입니다.

### 2. Hash Partition

*Range Partition*의 장점은 사용자가 지정한 서버로 특정 범위 값을 저장할 수 있다는 것입니다.
