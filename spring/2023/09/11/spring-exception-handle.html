<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring MVC에서 exception handling 하기-01 | Young’s Logs</title>
<meta name="generator" content="Jekyll v4.3.3">
<meta property="og:title" content="Spring MVC에서 exception handling 하기-01">
<meta name="author" content="Young Hwang">
<meta property="og:locale" content="en_US">
<meta name="description" content="스프링을 사용하여 예외 처리를 구현하는 방법에 대하여 정리한다. 주요 목표는 클라이언트에 사용되는 HTTP Status Codes에 애플리케이션의 예외를 매핑하는 것이다. Spring 3.2 이전에는 Spring MVC 응용 프로그램에서 예외를 처리하기 위한 두 가지 주요 접근 방식으로 HandlerExceptionResolver와 @ExceptionHandler 이 있었다. Spring 3.2는 이전 두 솔루션의 한계를 해결하기 위해 새로운 @ControllerAdvice 주석을 도입했다. Spring 5에서는 REST API에 기본적인 오류 처리를 위한 빠른 방법인 ResponseStatusException 클래스가 도입되었다. 이들은 모두 한 가지 공통점을 가지고 있는데, 관심사의 분리를 매우 잘 따르고 있다는 것이다. 일반적으로 어떤 종류의 장애가 발생했음을 나타내기 위해 예외를 적용할 수 있으며, 이 예외는 다음 중 하나를 통해 처리하게 된다.">
<meta property="og:description" content="스프링을 사용하여 예외 처리를 구현하는 방법에 대하여 정리한다. 주요 목표는 클라이언트에 사용되는 HTTP Status Codes에 애플리케이션의 예외를 매핑하는 것이다. Spring 3.2 이전에는 Spring MVC 응용 프로그램에서 예외를 처리하기 위한 두 가지 주요 접근 방식으로 HandlerExceptionResolver와 @ExceptionHandler 이 있었다. Spring 3.2는 이전 두 솔루션의 한계를 해결하기 위해 새로운 @ControllerAdvice 주석을 도입했다. Spring 5에서는 REST API에 기본적인 오류 처리를 위한 빠른 방법인 ResponseStatusException 클래스가 도입되었다. 이들은 모두 한 가지 공통점을 가지고 있는데, 관심사의 분리를 매우 잘 따르고 있다는 것이다. 일반적으로 어떤 종류의 장애가 발생했음을 나타내기 위해 예외를 적용할 수 있으며, 이 예외는 다음 중 하나를 통해 처리하게 된다.">
<link rel="canonical" href="/spring/2023/09/11/spring-exception-handle.html">
<meta property="og:url" content="/spring/2023/09/11/spring-exception-handle.html">
<meta property="og:site_name" content="Young’s Logs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-09-11T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Spring MVC에서 exception handling 하기-01">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Young Hwang"},"dateModified":"2023-09-11T00:00:00+00:00","datePublished":"2023-09-11T00:00:00+00:00","description":"스프링을 사용하여 예외 처리를 구현하는 방법에 대하여 정리한다. 주요 목표는 클라이언트에 사용되는 HTTP Status Codes에 애플리케이션의 예외를 매핑하는 것이다. Spring 3.2 이전에는 Spring MVC 응용 프로그램에서 예외를 처리하기 위한 두 가지 주요 접근 방식으로 HandlerExceptionResolver와 @ExceptionHandler 이 있었다. Spring 3.2는 이전 두 솔루션의 한계를 해결하기 위해 새로운 @ControllerAdvice 주석을 도입했다. Spring 5에서는 REST API에 기본적인 오류 처리를 위한 빠른 방법인 ResponseStatusException 클래스가 도입되었다. 이들은 모두 한 가지 공통점을 가지고 있는데, 관심사의 분리를 매우 잘 따르고 있다는 것이다. 일반적으로 어떤 종류의 장애가 발생했음을 나타내기 위해 예외를 적용할 수 있으며, 이 예외는 다음 중 하나를 통해 처리하게 된다.","headline":"Spring MVC에서 exception handling 하기-01","mainEntityOfPage":{"@type":"WebPage","@id":"/spring/2023/09/11/spring-exception-handle.html"},"url":"/spring/2023/09/11/spring-exception-handle.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="">
  <link rel="canonical" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Young's Logs">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js" async></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe-lightbox.umd.min.js" async></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe.umd.min.js" async></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/photoswipe.min.css" rel="stylesheet">
<style>
  .pswp .pswp__container .pswp__img {
    background-color: white;
  }
</style>

<script>
  function initPhotoSwipe() {
    let customOptions = {};

    try {
      const data = ``.replaceAll("=>", ":");
      customOptions = JSON.parse(data);
    } catch (e) {
      console.info("Invalid custom photo previewer options! " + e.message);
    }

    // Define object and gallery options
    const options = Object.assign(
      {
        gallery: "section.main",
        children: "a.photo-swipe",
        photo_scale: 2,
        // dynamic import is not supported in UMD version
        pswpModule: PhotoSwipe,
      },
      customOptions
    );

    const galleryEl = document.querySelector(options.gallery);
    if (!galleryEl) {
      return;
    }

    const imgEls = [];
    const els = galleryEl.querySelectorAll("img:not(.emoji)");
    els.forEach((el) => {
      if (el.src.trim() == "") {
        return;
      }
      if (!imgEls.includes(el)) {
        imgEls.push(el);
      }
    });

    if (imgEls.length === 0) {
      return;
    }

    imgEls.forEach((imgEl) => {
      imgEl.outerHTML = `
      <a class="photo-swipe"
        href="${imgEl.src}"
        data-pswp-width="${
          Math.max(imgEl.naturalWidth, imgEl.width) * options.photo_scale
        }"
        data-pswp-height="${
          Math.max(imgEl.naturalHeight, imgEl.height) * options.photo_scale
        }"
        data-pswp-caption="${imgEl.getAttribute("caption") || imgEl.alt}"
        target="_blank">
        ${imgEl.outerHTML}
      </a>`;
    });

    // Initialize PhotoSwipe 5
    var lightbox = new PhotoSwipeLightbox(options);

    lightbox.init();
  }

  window.addEventListener("load", initPhotoSwipe);
</script>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="Young's Logs" src="" onerror="this.style.display='none'">
  Young's Logs
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/">HOME</a><a class="page-link" href="/tags.html">TAGS</a>









<div class="page-link" style="display: inline;">



<div id="google_translate_element" style="display: none;">
</div>

<div class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>
</div>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Spring MVC에서 exception handling 하기-01</h1>
  <h2 class="post-subtitle"></h2>

  <div class="post-meta">
    <time class="dt-published" datetime="2023-09-11T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Sep 11, 2023
    </time>
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 11 mins</span>
  </div>
<div class="post-tags">
<a class="post-tag" href="/tags.html#spring">#spring</a><a class="post-tag" href="/tags.html#exception">#exception</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p>스프링을 사용하여 예외 처리를 구현하는 방법에 대하여 정리한다.
주요 목표는 클라이언트에 사용되는  HTTP <strong>Status Codes</strong>에 애플리케이션의 예외를 매핑하는 것이다.
Spring 3.2 이전에는 Spring MVC 응용 프로그램에서 예외를 처리하기 위한 두 가지 주요 접근 방식으로 <em>HandlerExceptionResolver</em>와 <em>@ExceptionHandler</em> 이 있었다.
Spring 3.2는 이전 두 솔루션의 한계를 해결하기 위해 새로운 <strong>@ControllerAdvice</strong> 주석을 도입했다.
Spring 5에서는 REST API에 기본적인 오류 처리를 위한 빠른 방법인 ResponseStatusException 클래스가 도입되었다.
이들은 모두 한 가지 공통점을 가지고 있는데, <strong>관심사의 분리</strong>를 매우 잘 따르고 있다는 것이다.
일반적으로 어떤 종류의 장애가 발생했음을 나타내기 위해 예외를 적용할 수 있으며, 이 예외는 다음 중 하나를 통해 처리하게 된다.</p>

<h2 id="controller-level에서-exceptionhandler">Controller Level에서 @ExceptionHandler</h2>

<p>에러를 처리할 방법은 정의하고 @ExceptionHandler 어노테이션을 이용한다.
해당 방법은 @Controller 레벨에서 처리하는 방법이다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GreetingController</span><span class="o">{</span>
    <span class="c1">//...</span>
    <span class="nd">@ExceptionHandler</span><span class="o">({</span> <span class="nc">CustomException1</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">CustomException2</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleException</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//...</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>이 방식에는 큰 단점이 있다. 
@ExceptionHandler을 이용한 방법은 해당 특정 컨트롤러에 대해서만 활성화되며, 전체 응용 프로그램에 대해서는 전역적으로 활성화되지 않는다. 
그렇다고 동일한 예외 처리를 모든 컨트롤러에 해당 annotation을 이용하여 모두 추가하는 것은 좋지 않다. 
모든 controller가 base controller를 확장하게 하여 해결할 수 있다.
그러나 이 해결책은 애플리케이션에서 여러 불가능한 상황이 발생한다.
예를 들어, 컨트롤러는 이미 다른 기본 클래스에서 확장된 것일 수도 있고, 다른 jar에 있거나 직접적인 수정이 불가능한 경우가 해당될 것이다.</p>

<p>다음으로 전역적인 문제와 컨트롤러와 같은 기존 아티팩트에 대한 변경을하지 않는 다른 방법에 대해 살펴보겠다.</p>

<h2 id="handlerexceptionresolver를-이용한-방법">handlerExceptionResolver를 이용한 방법</h2>

<p>HandlerExceptionResolver를 정의하는 방법도 있다.
이를 통해 응용 프로그램에서 발생하는 모든 예외를 해결할 수 있으며 REST API에 동일한 예외 처리 메커니즘을 구현할 수 있다.
Spring에서는 3가지의 HandlerExceptionResolver가 기본적으로 빈으로 등록된다.</p>

<h3 id="exceptionhandlerexceptionresolver">ExceptionHandlerExceptionResolver</h3>

<p>Spring 3.1에서 도입 되었다.
이는 앞서 제시한 @ExceptionHandler 메커니즘의 작동 방식을 구성하는 핵심 구성 요소이다.</p>

<h3 id="defaulthandlerexceptionresolver">DefaultHandlerExceptionResolver</h3>

<p>Spring 3.0에 도입 되었다.</p>

<p>이는 대응하는 HTTP 상태 코드, 즉 클라이언트 오류 4xx 및 서버 오류 5xx 상태 코드에 대한 표준 Spring 예외를 해결하는 데 사용된다.
처리하는 Spring 예외의 전체 목록과 상태 코드에 매핑하는 방법은 다음과 같다.
응답의 상태 코드를 올바르게 설정하지만, 한 가지 제한 사항은 응답 본문에 아무것도 설정하지 않는다는 것이다.
REST API의 경우 상태 코드가 클라이언트에 제공하기에 충분하지 않은 정보입니다. 응답 본문이 있어야 애플리케이션이 실패에 대한 추가 정보를 제공할 수 있다.
이는 ModelAndView를 통해 뷰 해상도와 렌더링 오류 콘텐츠를 구성하면 해결할 수 있지만 솔루션이 최적이 아닌 것은 분명하다.
그렇기 때문에 Spring 3.2에서 더 나은 옵션을 추가했다.</p>

<h3 id="responsestatusexceptionresolver">ResponseStatusExceptionResolver</h3>

<p>Spring 3.0에 도입 되었다.</p>

<p>주요 업무는 사용자 지정 예외에서 사용 가능한 @ResponseStatus 주석을 사용하고 이러한 예외를 HTTP 상태 코드에 매핑한다.</p>

<h2 id="handlerexceptionresolver들이-어떻게-bean으로-등록되는가">HandlerExceptionResolver들이 어떻게 Bean으로 등록되는가?</h2>

<p>그렇다면 어떻게 HandlerExceptionResolver 들이 빈으로 등록이 되는지 살펴 보겠다.
Spring MVC의 자동 설정인 WebMvcAutoConfiguration을 먼저 살표보자.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">org.springframework.boot.autoconfigure.web.servlet</span><span class="o">;</span>

<span class="nd">@AutoConfiguration</span><span class="o">(</span><span class="n">after</span> <span class="o">=</span> <span class="o">{</span> <span class="nc">DispatcherServletAutoConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">TaskExecutionAutoConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
		<span class="nc">ValidationAutoConfiguration</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
<span class="nd">@ConditionalOnWebApplication</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="nc">Type</span><span class="o">.</span><span class="na">SERVLET</span><span class="o">)</span>
<span class="nd">@ConditionalOnClass</span><span class="o">({</span> <span class="nc">Servlet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">DispatcherServlet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">WebMvcConfigurer</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span> <span class="c1">// 1 </span>
<span class="nd">@ConditionalOnMissingBean</span><span class="o">(</span><span class="nc">WebMvcConfigurationSupport</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="c1">// 2 </span>
<span class="nd">@AutoConfigureOrder</span><span class="o">(</span><span class="nc">Ordered</span><span class="o">.</span><span class="na">HIGHEST_PRECEDENCE</span> <span class="o">+</span> <span class="mi">10</span><span class="o">)</span>
<span class="nd">@ImportRuntimeHints</span><span class="o">(</span><span class="nc">WebResourcesRuntimeHints</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebMvcAutoConfiguration</span> <span class="o">{</span>

    <span class="c1">//...</span>
    
	<span class="nd">@Configuration</span><span class="o">(</span><span class="n">proxyBeanMethods</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>    <span class="c1">// 3</span>
	<span class="nd">@Import</span><span class="o">(</span><span class="nc">EnableWebMvcConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>    <span class="c1">// 4 </span>
	<span class="nd">@EnableConfigurationProperties</span><span class="o">({</span> <span class="nc">WebMvcProperties</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">WebProperties</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
	<span class="nd">@Order</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">WebMvcAutoConfigurationAdapter</span> <span class="kd">implements</span> <span class="nc">WebMvcConfigurer</span><span class="o">,</span> <span class="nc">ServletContextAware</span> <span class="o">{</span>
	    <span class="c1">//...</span>
    <span class="o">}</span>
    
  	<span class="nd">@Configuration</span><span class="o">(</span><span class="n">proxyBeanMethods</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>    <span class="c1">// 5</span>
	<span class="nd">@EnableConfigurationProperties</span><span class="o">(</span><span class="nc">WebProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">EnableWebMvcConfiguration</span> <span class="kd">extends</span> <span class="nc">DelegatingWebMvcConfiguration</span> <span class="kd">implements</span> <span class="nc">ResourceLoaderAware</span> <span class="o">{</span>    <span class="c1">// 6</span>
	    <span class="c1">//...</span>

        <span class="c1">// 7</span>
		<span class="nd">@Override</span>
		<span class="kd">protected</span> <span class="nc">ExceptionHandlerExceptionResolver</span> <span class="nf">createExceptionHandlerExceptionResolver</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mvcRegistrations</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">ExceptionHandlerExceptionResolver</span> <span class="n">resolver</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">mvcRegistrations</span>
					<span class="o">.</span><span class="na">getExceptionHandlerExceptionResolver</span><span class="o">();</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">resolver</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
					<span class="k">return</span> <span class="n">resolver</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">}</span>
			<span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">createExceptionHandlerExceptionResolver</span><span class="o">();</span>
		<span class="o">}</span>

	    <span class="c1">//...</span>
    <span class="o">}</span>
    
    <span class="c1">//...  </span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">org.springframework.web.servlet.config.annotation</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebMvcConfigurationSupport</span> <span class="kd">implements</span> <span class="nc">ApplicationContextAware</span><span class="o">,</span> <span class="nc">ServletContextAware</span> <span class="o">{</span> <span class="c1">// 8</span>

    <span class="c1">//...</span>
    
    <span class="c1">// 9</span>
    <span class="nd">@Bean</span>
	<span class="kd">public</span> <span class="nc">HandlerExceptionResolver</span> <span class="nf">handlerExceptionResolver</span><span class="o">(</span>
			<span class="nd">@Qualifier</span><span class="o">(</span><span class="s">"mvcContentNegotiationManager"</span><span class="o">)</span> <span class="nc">ContentNegotiationManager</span> <span class="n">contentNegotiationManager</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">List</span><span class="o">&lt;</span><span class="nc">HandlerExceptionResolver</span><span class="o">&gt;</span> <span class="n">exceptionResolvers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
		<span class="n">configureHandlerExceptionResolvers</span><span class="o">(</span><span class="n">exceptionResolvers</span><span class="o">);</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">exceptionResolvers</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span> <span class="c1">// 10 </span>
			<span class="n">addDefaultHandlerExceptionResolwers</span><span class="o">(</span><span class="n">exceptionResolvers</span><span class="o">,</span> <span class="n">contentNegotiationManager</span><span class="o">);</span> <span class="c1">// 11 </span>
		<span class="o">}</span>
		<span class="n">extendHandlerExceptionResolvers</span><span class="o">(</span><span class="n">exceptionResolvers</span><span class="o">);</span>
		<span class="nc">HandlerExceptionResolverComposite</span> <span class="n">composite</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HandlerExceptionResolverComposite</span><span class="o">();</span>
		<span class="n">composite</span><span class="o">.</span><span class="na">setOrder</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
		<span class="n">composite</span><span class="o">.</span><span class="na">setExceptionResolvers</span><span class="o">(</span><span class="n">exceptionResolvers</span><span class="o">);</span>    <span class="c1">// 15 </span>
		<span class="k">return</span> <span class="n">composite</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="c1">// 실제 적인 default handlerExceptionResolvers instance 생성</span>
	<span class="c1">// List&lt;HandlerExceptionResolver&gt; 에 생성된 instances 삽입</span>
	<span class="kd">protected</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">addDefaultHandlerExceptionResolvers</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">HandlerExceptionResolver</span><span class="o">&gt;</span> <span class="n">exceptionResolvers</span><span class="o">,</span>
			<span class="nc">ContentNegotiationManager</span> <span class="n">mvcContentNegotiationManager</span><span class="o">)</span> <span class="o">{</span>

		<span class="nc">ExceptionHandlerExceptionResolver</span> <span class="n">exceptionHandlerResolver</span> <span class="o">=</span> <span class="n">createExceptionHandlerExceptionResolver</span><span class="o">();</span> <span class="c1">// 12 </span>
		
		<span class="c1">//...</span>

		<span class="nc">ResponseStatusExceptionResolver</span> <span class="n">responseStatusResolver</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ResponseStatusExceptionResolver</span><span class="o">();</span> <span class="c1">// 13</span>
		<span class="n">responseStatusResolver</span><span class="o">.</span><span class="na">setMessageSource</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">applicationContext</span><span class="o">);</span>
		<span class="n">exceptionResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">responseStatusResolver</span><span class="o">);</span>

		<span class="n">exceptionResolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">DefaultHandlerExceptionResolver</span><span class="o">());</span>  <span class="c1">// 14</span>
	<span class="o">}</span>

	
	<span class="c1">//...</span>
<span class="o">}</span>
</code></pre></div></div>
<p>먼저 WebMvcAutoConfiguration이 작동하기 위해서는 아래의 조건이 만족되어야 한다.</p>

<ol>
  <li>Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class 가 클래스 로더에 존재하여야 한다.</li>
  <li>WebMvcConfigurtionSupport clsss가 bean으로 등록되지 않아야 한다.</li>
  <li>WebMvcAutoConfigurationAdapter inner class 에 @Configuration annotaion을 이용하여 빈 설정 클래스로 선언하고 있다.</li>
  <li>그리고 @Import annotation으로 EnableWebMvcConfiguration.class 를 import하고 있는데 이 또한 WebMvcAutoConfiguration class 내에 존재한다.</li>
  <li>EnableWebMvcConfiguration inner class 에 @Configuration annotation으로 빈 설정 클래스 이다.</li>
  <li>EnableWebMvcConfiguration은 DelegatingWebMvcConfiguration을 상속하고 있다.</li>
  <li>createExceptionHandlerExceptionResolver()을 override 하여 ExceptionHandlerExceptionResolver 객체를 생성한다.</li>
  <li>DelegatingWebMvcConfiguration은 WebMvcConfigurationSupport를 상속하고 있다.</li>
  <li>handlerExceptionResolver() 메소드에서 HandlerExceptionResolver bean을 생성한다.</li>
  <li>exceptionResolvers property 가 empty면 실행 default HandlerExceptionResolver 들을 생성한다.</li>
  <li>addDefaultHandlerExceptionResolwers() 메소드를 호출하여 default HandlerExceptionResolver를 생성하고 exceptionResolvers에 리스트 형태로 담는다.</li>
  <li>7번에서 override 한 메소드를 이용하여 ExceptionHandlerExceptionResolver 객체를 생성한다.</li>
  <li>ResponseStatusExceptionResolver 객체를 생성 한다.</li>
  <li>DefaultHandlerExceptionResolver 생성를 생성 한다.</li>
  <li>HandlerExceptionResolverComposite 객체에 composite 패턴을 이용하여 빈으로 등록한다.</li>
</ol>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5XZWJNdmNDb25maWd1cmF0aW9uU3VwcG9ydCA8LS0gRGVsZWdhdGluZ1dlYk12Y0NvbmZpZ3VyYXRpb25cbkRlbGVnYXRpbmdXZWJNdmNDb25maWd1cmF0aW9uIDwtLSBFbmFibGVXZWJNdmNDb25maWd1cmF0aW9uIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifX0"></p>

<p>이러한 일련의 과정을 통하여 handlerExceptoinResolver 객체들이 빈으로 등록되게 된다.</p>

<h2 id="handlerexceptoinresolver들은-어떻게-동작하는가">handlerExceptoinResolver들은 어떻게 동작하는가?</h2>

<p>hanlderExceptionResolver가 빈으로 등록이 완료되었고 애플리케이션이 실행될 때 어떻게 실행이 되는지 살펴보도록 하겠다.
MVC를 기준으로 살펴보기에 DispatcherServlet에서의 동작을 확인한다.</p>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5IdHRwU2VydmxldCA8LS0gSHR0cFNlcnZsZXRCZWFuXG5IdHRwU2VydmxldEJlYW4gPC0tIEZyYW1ld29ya1NlcnZsZXRcbkZyYW1ld29ya1NlcnZsZXQgPC0tIERpc3BhdGNoZXJTZXJ2bGV0XG48PGFic3RyYWN0Pj5IdHRwU2VydmxldFxuPDxhYnN0cmFjdD4-SHR0cFNlcnZsZXRCZWFuXG48PGFic3RyYWN0Pj5GcmFtZXdvcmtTZXJ2bGV0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifX0"></p>

<p>앞서 살펴본 WebMvcAutoConfiguration class를 보면 ‘@AutoConfiguration(after = { DispatcherServletAutoConfiguration.class, … })’ 이 선언된 것을 확인할 수 있다.
즉 WebMvcAutoCongfiguration 설정이 이루어지기 전에 DispatcherServletAutoConfiguration.class 의 빈 설정이 먼저 진행 되어 DispatcherServlet이 빈으로 등록되게 된다.
DispatcherServlet은 Servlet이 기에 사용자의 요청이 최초로 들어올때 init() 메소드를 통한 초기화가 이루어지게 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">HttpServletBean</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="kd">implements</span> <span class="nc">EnvironmentCapable</span><span class="o">,</span> <span class="nc">EnvironmentAware</span> <span class="o">{</span>
	<span class="c1">//...</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>
        <span class="c1">//...</span>

		<span class="c1">// Let subclasses do whatever initialization they like.</span>
		<span class="n">initServletBean</span><span class="o">();</span>  <span class="c1">// 1</span>
	<span class="o">}</span>
	
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initServletBean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>  <span class="c1">// 2</span>
	<span class="o">}</span>

	<span class="c1">//...</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">FrameworkServlet</span> <span class="kd">extends</span> <span class="nc">HttpServletBean</span> <span class="kd">implements</span> <span class="nc">ApplicationContextAware</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">initServletBean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>    <span class="c1">// 3</span>
        <span class="c1">//...</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">webApplicationContext</span> <span class="o">=</span> <span class="n">initWebApplicationContext</span><span class="o">();</span>   <span class="c1">// 4</span>
			<span class="n">initFrameworkServlet</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">catch</span> <span class="o">(</span><span class="nc">ServletException</span> <span class="o">|</span> <span class="nc">RuntimeException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Context initialization failed"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
			<span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="c1">//...</span>
	<span class="o">}</span>
	
    <span class="kd">protected</span> <span class="nc">WebApplicationContext</span> <span class="nf">initWebApplicationContext</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">WebApplicationContext</span> <span class="n">rootContext</span> <span class="o">=</span>
				<span class="nc">WebApplicationContextUtils</span><span class="o">.</span><span class="na">getWebApplicationContext</span><span class="o">(</span><span class="n">getServletContext</span><span class="o">());</span>
		<span class="nc">WebApplicationContext</span> <span class="n">wac</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="c1">//...</span>
        
		<span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">refreshEventReceived</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// Either the context is not a ConfigurableApplicationContext with refresh</span>
			<span class="c1">// support or the context injected at construction time had already been</span>
			<span class="c1">// refreshed -&gt; trigger initial onRefresh manually here.</span>
			<span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">onRefreshMonitor</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">onRefresh</span><span class="o">(</span><span class="n">wac</span><span class="o">);</span> <span class="c1">// 5</span>
			<span class="o">}</span>
		<span class="o">}</span>
		
        <span class="c1">//...</span>

		<span class="k">return</span> <span class="n">wac</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onRefresh</span><span class="o">(</span><span class="nc">ApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// 6</span>
		<span class="c1">// For subclasses: do nothing by default.</span>
	<span class="o">}</span>

	<span class="c1">//...</span>
<span class="o">}</span>

<span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"serial"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DispatcherServlet</span> <span class="kd">extends</span> <span class="nc">FrameworkServlet</span> <span class="o">{</span>
    <span class="c1">//...</span>
    
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onRefresh</span><span class="o">(</span><span class="nc">ApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// 7</span>
		<span class="n">initStrategies</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initStrategies</span><span class="o">(</span><span class="nc">ApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span> 
	    <span class="c1">//...</span>
		<span class="n">initHandlerExceptionResolvers</span><span class="o">(</span><span class="n">context</span><span class="o">);</span> <span class="c1">// 8</span>
	    <span class="c1">//...</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerExceptionResolvers</span><span class="o">(</span><span class="nc">ApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">handlerExceptionResolvers</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

		<span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">detectAllHandlerExceptionResolvers</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// 9</span>
			<span class="c1">// Find all HandlerExceptionResolvers in the ApplicationContext, including ancestor contexts.</span>
			<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">HandlerExceptionResolver</span><span class="o">&gt;</span> <span class="n">matchingBeans</span> <span class="o">=</span> <span class="nc">BeanFactoryUtils</span>
					<span class="o">.</span><span class="na">beansOfTypeIncludingAncestors</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="nc">HandlerExceptionResolver</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span> <span class="c1">// 10</span>
			<span class="k">if</span> <span class="o">(!</span><span class="n">matchingBeans</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
				<span class="k">this</span><span class="o">.</span><span class="na">handlerExceptionResolvers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">matchingBeans</span><span class="o">.</span><span class="na">values</span><span class="o">());</span> <span class="c1">// 11</span>
				<span class="c1">// We keep HandlerExceptionResolvers in sorted order.</span>
				<span class="nc">AnnotationAwareOrderComparator</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">handlerExceptionResolvers</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">else</span> <span class="o">{</span>
		    <span class="c1">//...</span>
		<span class="o">}</span>
		
		<span class="c1">//...</span>
	<span class="o">}</span>
	
	<span class="c1">//...</span>
<span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>Servlet init() 메소드 실행 시 initServletBean() 호출된다.</li>
  <li>initServletBean() 메소드는 추상 메소드로 HttpServletBean 클래스 상속 시 구현 필요하다.</li>
  <li>initServletBean() 메소드는 FrameworkServlet 클래스에서 구현되어 있다.</li>
  <li>initServletBean() 메소드를 살펴보면 initWebApplicationContext() 메소드를 호출한다.</li>
  <li>initWebApplicationContext()에서 refreshEventReceived 변수가 false 이면 onRefresh() 메소드가 호출된다.</li>
  <li>onRefresh()는 추상 메소드로 선언된것을 확인가능하다.</li>
  <li>DispatcherServlet 에서 onRefresh() 메소드가 구현되어 있다. initStrategies() 메소드만을 호출한다.</li>
  <li>initStrategies()에서는 여러 메소드를 호출하고 있는데 그중 initHandlerExceptionResolvers() 메소드를 살펴본다.</li>
  <li>initHandlerExceptionResolvers() 메소드에서 detectAllHandlerExceptionResolvers 변수가 true일 경우를 확인해본다.</li>
  <li>‘BeanFactoryUtils
.beansOfTypeIncludingAncestors(context, HandlerExceptionResolver.class, true, false)’ 메소드는 HandlerExceptionResolver.class를 구현한 객체를 가져온다.</li>
  <li>matchingBeans.values()로 handlerExceptionResolvers 변수에 HandlerExceptionResolver 인스턴스들을 할당한다.</li>
</ol>

<p>이렇게 DispatchServlet에서 HandlerExceptionResolver 들이 주입되는것도 확인하였다.</p>

<h2 id="마무리">마무리</h2>

<p>지금까지 스프링에서 사용하는 HandlerExceptionResolever의 간단히 종류와 역할에 대해서 살펴보았다.
또한 이러한 Resolver들이 어떻게 Bean으로 등록이 되고 DispatchServlet에 어떻게 주입이 되는지 까지도 보았다.
스프링에서 Composite Pattern 패턴 이나 Tempate Method 패턴을 어떻게 활용하고 있는지도 살펴 볼수 있었다.
다음에는 이 문서의 후속으로 어떻게 Controller에서 Exception을 핸들링하는지 HandlerExceptionResolver에서 어떻게 Exception을 확인하는지 알아보겠다.</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/javascript/2023/09/09/javascript-vanilla-data-grouping.html" title="vanilla javascript를 이용한 객체 배열 그룹핑">vanilla javascript를 이용한 객체 배열 그룹핑...</a><a class="next" href="/web/2023/12/03/web-page-performance.html" title="K-DEVCON 발표 - 웹 페이지 성능 측정 지표">K-DEVCON 발표 - 웹 페이지 성능...</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li class="">
          <a class="post-link" href="/redis/2024/02/19/redis-architecture.html" title="Redis Architecture">
            Redis Architecture<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/javascript/2023/09/09/javascript-vanilla-data-grouping.html" title="vanilla javascript를 이용한 객체 배열 그룹핑">
            vanilla javascript를 이용한 객체 배열 그룹핑<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/spring/2023/09/11/spring-exception-handle.html" title="Spring MVC에서 exception handling 하기-01">
            Spring MVC에서 exception handling 하기-01<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
<li class="">
          <a class="post-link" href="/java/2024/03/01/java-java-17-features.html" title="Java 17 Features">
            Java 17 Features<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>Unpublished Work <span class="copyleft">©</span> 2017-2024 Young Hwang</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
